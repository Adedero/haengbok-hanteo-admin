import{d as P,u as U,a as j,r as n,o as r,c as m,b as a,e as l,f as S,s as C,_ as R,g as z,h as $,i as L,t as h,j as V,k as y,l as F,m as T,n as q,F as D,p as B,q as A,v as G,w as H}from"./index-3c9gO1-H.js";const I=P({__name:"PasswordReset",props:{user:{}},emits:["password-reset"],setup(b){const f=U(),t=j(),s=n(!1),v=n(null),d=n(!1),_=async()=>{await $(`api/user-password-reset/${b.user._id}`,{loading:s,error:v,config:{router:f,method:"PUT"}},()=>{d.value=!0})},g=()=>{t.require({message:"Do you want to reset the user's password?",header:"Reset Password",icon:"pi pi-info-circle",rejectLabel:"Cancel",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Reset",severity:"danger"},accept:()=>{_()}})};return(i,e)=>{const p=C,c=R,w=z;return r(),m("div",null,[a(p,{onClick:g,loading:s.value,severity:"danger",label:"Reset Password",icon:"pi pi-key",fluid:""},null,8,["loading"]),e[2]||(e[2]=l("small",{class:"text-red-500"},[S(" Reset the user's password to "),l("span",{class:"font-semibold"},"000000")],-1)),a(c,{error:v.value,overlay:"","show-header":""},null,8,["error"]),a(w,{onHide:e[0]||(e[0]=u=>i.$emit("password-reset")),visible:d.value,"onUpdate:visible":e[1]||(e[1]=u=>d.value=u),"show-okay-button":"",overlay:"",message:"Password has been reset successfully to 000000"},null,8,["visible"])])}}}),O={class:"bg-white rounded-lg p-4 w-full"},J={class:"flex items-center justify-between"},K={class:"flex items-center gap-1"},Q={class:"font-medium"},W={key:1,class:"flex items-center gap-2"},X={class:"mt-4 grid md:grid-cols-2 gap-4"},Y={class:"md:col-span-2"},Z=P({__name:"UserDetails",props:{user:{},index:{}},setup(b){const f=U(),t=n({...b.user,birthday:new Date(b.user.birthday)}),s=n(!1),v=L(()=>Object.values(t.value).some(i=>i===""||i===null||i===void 0)||!t.value.location.country),d=n(!1),_=n(null),g=async()=>{await $(`api/users/${t.value._id}`,{loading:d,error:_,config:{router:f,method:"PUT",body:t.value}},()=>{s.value=!1})};return(i,e)=>{const p=C,c=F,w=T,u=q,k=I;return r(),m("div",O,[l("div",J,[l("div",K,[l("p",null,h(i.index+1)+".",1),l("p",Q,h(t.value.name),1)]),s.value?y("",!0):(r(),V(p,{key:0,onClick:e[0]||(e[0]=o=>s.value=!0),size:"small",label:"Edit",icon:"pi pi-user-edit"})),s.value?(r(),m("div",W,[a(p,{onClick:g,disabled:v.value,loading:d.value,size:"small",label:"Save",icon:"pi pi-check"},null,8,["disabled","loading"]),a(p,{onClick:e[1]||(e[1]=o=>s.value=!1),size:"small",severity:"secondary",label:"Cancel",icon:"pi pi-times"})])):y("",!0)]),e[13]||(e[13]=l("hr",{class:"my-2"},null,-1)),l("div",X,[l("div",null,[e[8]||(e[8]=l("label",{for:"name",class:"text-sm text-slate-500 font-medium"},"Name",-1)),a(c,{modelValue:t.value.name,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.name=o),modelModifiers:{trim:!0},id:"name",fluid:"",disabled:!s.value},null,8,["modelValue","disabled"])]),l("div",null,[e[9]||(e[9]=l("label",{for:"gender",class:"text-sm text-slate-500 font-medium"},"Gender",-1)),a(w,{modelValue:t.value.gender,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.gender=o),options:["female","male","other"],"input-id":"gender",fluid:"",disabled:!s.value},null,8,["modelValue","disabled"])]),l("div",Y,[e[10]||(e[10]=l("label",{for:"email",class:"text-sm text-slate-500 font-medium"},"Email",-1)),a(c,{modelValue:t.value.email,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.email=o),type:"email",id:"email",fluid:"",disabled:!s.value},null,8,["modelValue","disabled"])]),l("div",null,[e[11]||(e[11]=l("label",{for:"birthday",class:"text-sm text-slate-500 font-medium"},"Birthday",-1)),a(u,{modelValue:t.value.birthday,"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.birthday=o),"input-id":"birthday",dateFormat:"dd MM, yy",fluid:"",disabled:!s.value},null,8,["modelValue","disabled"])]),l("div",null,[e[12]||(e[12]=l("label",{for:"location",class:"text-sm text-slate-500 font-medium"},"Location",-1)),a(c,{modelValue:t.value.location.country,"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.location.country=o),id:"location",fluid:"",disabled:!s.value},null,8,["modelValue","disabled"])]),s.value?(r(),V(k,{key:0,user:t.value,onPasswordReset:e[7]||(e[7]=o=>s.value=!1)},null,8,["user"])):y("",!0)])])}}}),ee={class:"grid gap-4"},se=P({__name:"PageLoader",setup(b){return(f,t)=>{const s=A;return r(),m("div",ee,[(r(),m(D,null,B(3,v=>l("div",{key:v,class:"bg-white rounded-lg p-4 grid grid-cols-2 gap-4"},[a(s,{height:"2.5rem",class:"col-span-1"}),a(s,{height:"2.5rem",class:"col-span-1"}),a(s,{height:"2.5rem",class:"col-span-2"}),a(s,{height:"2.5rem",class:"col-span-1"}),a(s,{height:"2.5rem",class:"col-span-1"})])),64))])}}}),te={class:"p-4 lg:p-0 md:h-[calc(100dvh-7rem)]"},le={class:"fixed z-[100] top-2 right-16 lg:top-6 lg:right-8 flex items-center gap-2"},ae={key:0,class:"font-bold text-[--p-primary-color]"},oe={key:1,class:"grid gap-2 mb-4"},re=P({__name:"UsersView",setup(b){const f=U(),t=n(0),s=n(0),v=u=>{s.value=u.page,p()},d=n(10),_=L(()=>d.value*s.value),g=n(!1),i=n(null),e=n(null);async function p(){await $(`api/users?skip=${_.value}&limit=${d.value}`,{loading:g,error:i,config:{router:f,cache:!0}},u=>{e.value=u.items})}const c=n();async function w(){await $("api/users-count",{loading:g,error:i,config:{router:f,cache:!0}},u=>{c.value=u.count})}return G(async()=>{await Promise.all([p(),w()])}),(u,k)=>{const o=R,M=Z,E=H;return r(),m("main",te,[l("div",le,[c.value?(r(),m("p",ae," ("+h(c.value)+") ",1)):y("",!0)]),g.value?(r(),V(se,{key:0})):y("",!0),a(o,{error:i.value,"show-retry-button":"",onRetry:p,"show-header":""},null,8,["error"]),!g.value&&!i.value&&e.value?(r(),m("div",oe,[(r(!0),m(D,null,B(e.value,(x,N)=>(r(),m("div",{key:x._id},[a(M,{user:x,index:N},null,8,["user","index"])]))),128))])):y("",!0),l("div",null,[a(E,{first:t.value,"onUpdate:first":k[0]||(k[0]=x=>t.value=x),onPage:v,rows:d.value,totalRecords:c.value,template:"FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink"},null,8,["first","rows","totalRecords"])])])}}});export{re as default};
